<html ng-app="pathmaker">
    <link href="style.css" rel="stylesheet"/>
    <script src="angular.min.js"></script>
    <script src="app.js"></script>
    <script src="path.controller.js"></script>
    <script src="ships.js"></script>
    <script src="geometry.js"></script>
    
    <body ng-controller="PathCtrl" ng-init="initialize()">
        <svg id="spacecanvas"
             class="space"
             ng-mousedown="isClickOnSprite($event)"
             ng-mousemove="drawing && drawPath($event)"
             ng-mouseleave="drawing = false"
             ng-mouseup="drawing && beginFlightPath()">
            
            <!--circle class="box" ng-style="sprite" ng-init="initialize()"></circle-->
            <polygon ng-repeat="eachShape in sprite.shape"
                     points="{{formatPoints(eachShape.points, sprite.cx, sprite.cy, sprite.currentAngle) || ''}}"
                     ng-style="eachShape.style"
                     class="shipShape" >
            </polygon>
            
            <polyline points="{{formattedPath || '0,0'}}" class="originalFlightPath"></polyline>
            <polyline points="{{smoothPath || '0,0'}}" class="smoothFlightPath"></polyline>
            
            <polyline points="{{formatPoints(test.testPath) || '0,0'}}" class="originalFlightPath"></polyline>
            <polyline points="{{formatPoints(test.smoothedTestPath) || '0,0'}}" class="smoothFlightPath"></polyline>
            <polyline points="{{formatPoints(test.smoothPiece1) || '0,0'}}" class="otherFlightPath"></polyline>
            <polyline points="{{formatPoints(test.smoothPiece2) || '0,0'}}" class="otherFlightPath"></polyline>

            <polyline points="{{formatPoints(test.outputPoints) || '0,0'}}" class="smoothFlightPath"></polyline>
            
        </svg>
        <div>
            <div>
                <b>Point1</b>
                <label>x<input type="number" ng-model="test.point1.x"></label>
                <label>y<input type="number" ng-model="test.point1.y"></label>
                <label>theta(o)<input type="number" ng-model="test.theta1"></label>
            </div>
            <div>
                <b>Point2</b>
                <label>x<input type="number" ng-model="test.point2.x"></label>
                <label>y<input type="number" ng-model="test.point2.y"></label>
                <label>theta(o)<input type="number" ng-model="test.theta2"></label>
            </div>
            <button ng-click="getOutput(test.point1, test.point2, test.theta1, test.theta2)">Calculate</button>
            
            <pre>(inputPoints) = {{test.testPath | json}}</pre>
            <pre>path = {{test.smoothedPathPoints | json}}</pre>
            <div>(outputPoints) = {{formatPoints(test.outputPoints)}}</div>
            <pre>outputPoints = {{test.outputPoints | json}}</pre>
        </div>
    </body>
</html>